"""
EPM Note Engine - Help Page Component

Displays user manual and operation guide within the app.
"""

import streamlit as st


def render_help_page() -> None:
    """Render the help page with user manual content."""

    st.title("ğŸ“– EPM Note Engine ãƒ˜ãƒ«ãƒ—")
    st.caption("è¨˜äº‹ä½œæˆã®æ‰‹é †ã¨ã‚³ãƒ„")

    # Quick start
    with st.expander("ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆ5åˆ†ã§ç†è§£ï¼‰", expanded=True):
        st.markdown("""
        ### è¨˜äº‹ä½œæˆã®æµã‚Œ

        ```
        1. è¨˜äº‹é¸æŠ â†’ 2. ãƒªã‚µãƒ¼ãƒ â†’ 3. ã‚¨ãƒƒã‚»ãƒ³ã‚¹å…¥åŠ› â†’ 4. AIç”Ÿæˆ â†’ 5. ãƒ¬ãƒ“ãƒ¥ãƒ¼ â†’ 6. æŠ•ç¨¿
        ```

        | ã‚¹ãƒ†ãƒƒãƒ— | ã‚„ã‚‹ã“ã¨ | æ‰€è¦æ™‚é–“ |
        |---------|---------|---------|
        | 1. è¨˜äº‹é¸æŠ | ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰è¨˜äº‹ã‚’é¸ã¶ | 30ç§’ |
        | 2. ãƒªã‚µãƒ¼ãƒ | SEOã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ã€Œãƒªã‚µãƒ¼ãƒé–‹å§‹ã€ | 1-2åˆ†ï¼ˆè‡ªå‹•ï¼‰ |
        | 3. ã‚¨ãƒƒã‚»ãƒ³ã‚¹ | å¤±æ•—è«‡ãƒ»æ„è¦‹ãƒ»çŸ¥è¦‹ã‚’å…¥åŠ› | 5-10åˆ† |
        | 4. AIç”Ÿæˆ | ã€Œè¨˜äº‹ã‚’ç”Ÿæˆã™ã‚‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ | 2-3åˆ†ï¼ˆè‡ªå‹•ï¼‰ |
        | 5. ãƒ¬ãƒ“ãƒ¥ãƒ¼ | AIãŒè‡ªå‹•ã§å“è³ªãƒã‚§ãƒƒã‚¯ãƒ»ä¿®æ­£ | 1-2åˆ†ï¼ˆè‡ªå‹•ï¼‰ |
        | 6. æŠ•ç¨¿ | Note.comã«ã‚³ãƒ”ãƒš or è‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ | 1åˆ† |
        """)

    # Detailed guide
    with st.expander("ğŸ“ å„ã‚¹ãƒ†ãƒƒãƒ—ã®è©³ç´°"):
        tab1, tab2, tab3, tab4 = st.tabs(["è¨˜äº‹é¸æŠ", "ãƒªã‚µãƒ¼ãƒ", "ã‚¨ãƒƒã‚»ãƒ³ã‚¹", "ç”Ÿæˆãƒ»æŠ•ç¨¿"])

        with tab1:
            st.markdown("""
            ### 1. è¨˜äº‹é¸æŠ

            **ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®æ“ä½œ:**
            1. è¨˜äº‹ä¸€è¦§ã‹ã‚‰è¨˜äº‹ã‚’é¸æŠ
            2. SEOã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ï¼ˆä¾‹: `äºˆç®—ç®¡ç† Excel é™ç•Œ`ï¼‰
            3. ã€Œãƒªã‚µãƒ¼ãƒé–‹å§‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯

            **ãƒã‚¤ãƒ³ãƒˆ:**
            - ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯å…·ä½“çš„ã«ï¼ˆã€Œäºˆç®—ã€ã‚ˆã‚Šã€Œäºˆç®—ç®¡ç† ä¸­å …ä¼æ¥­ã€ï¼‰
            - è¤‡æ•°ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã¯ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š
            """)

        with tab2:
            st.markdown("""
            ### 2. ãƒªã‚µãƒ¼ãƒ

            **AIãŒã‚„ã‚‹ã“ã¨:**
            - ç«¶åˆè¨˜äº‹ã®åˆ†æï¼ˆä¸Šä½5ä»¶ï¼‰
            - å·®åˆ¥åŒ–ãƒã‚¤ãƒ³ãƒˆã®æŠ½å‡º
            - æ§‹æˆæ¡ˆã®ç”Ÿæˆ
            - é »å‡ºã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®æŠ½å‡º

            **ãƒªã‚µãƒ¼ãƒãƒ¢ãƒ¼ãƒ‰:**
            | ãƒ¢ãƒ¼ãƒ‰ | ç‰¹å¾´ |
            |--------|------|
            | ãƒãƒ©ãƒ³ã‚¹å‹ | æ¨™æº–çš„ãªæ¤œç´¢ |
            | æ ¹æ‹ é‡è¦– | å­¦è¡“ãƒ»çµ±è¨ˆã‚µã‚¤ãƒˆå„ªå…ˆ |
            | å¸‚å ´é‡è¦– | ä¼æ¥­ãƒ»ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚µã‚¤ãƒˆå„ªå…ˆ |
            """)

        with tab3:
            st.markdown("""
            ### 3. ã‚¨ãƒƒã‚»ãƒ³ã‚¹å…¥åŠ›

            **4ç¨®é¡ã®ã‚¨ãƒƒã‚»ãƒ³ã‚¹:**

            | ã‚«ãƒ†ã‚´ãƒª | å…¥ã‚Œã‚‹ã¹ãå†…å®¹ | ä¾‹ |
            |---------|---------------|-----|
            | å¤±æ•—è«‡ | è‡ªåˆ†ãŒçµŒé¨“ã—ãŸè‹¦åŠ´ | ã€ŒExceläºˆç®—ã‚’3æ—¥å¾¹å¤œã§ç›´ã—ãŸã€ |
            | æ„è¦‹ | ä¸»å¼µãƒ»è€ƒãˆ | ã€Œäºˆç®—ã¯ç²¾åº¦ã‚ˆã‚Šé€Ÿåº¦ã€ |
            | æŠ€è¡“çŸ¥è¦‹ | ãƒã‚¦ãƒã‚¦ãƒ»ã‚³ãƒ„ | ã€Œéƒ¨é–€åˆ¥ã«è‰²åˆ†ã‘ã™ã‚‹ã¨è¦‹ã‚„ã™ã„ã€ |
            | ãƒ•ãƒƒã‚¯ | èª­è€…ã‚’å¼•ãè¾¼ã‚€ä¸€è¨€ | ã€Œã‚ã®æ™‚ã®ä¸Šå¸ã®é¡”...ã€ |

            **ã‚³ãƒ„:**
            - æœ€ä½3ã¤ä»¥ä¸Šå…¥åŠ›ã™ã‚‹ã¨ç‹¬è‡ªæ€§UP
            - æ•°å­—ã‚’å…¥ã‚Œã‚‹ã¨èª¬å¾—åŠ›UP
            - å…·ä½“çš„ãªã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ãŒâ—
            """)

        with tab4:
            st.markdown("""
            ### 4. ç”Ÿæˆãƒ»æŠ•ç¨¿

            **è¨˜äº‹ç”Ÿæˆ:**
            - ã€Œè¨˜äº‹ã‚’ç”Ÿæˆã™ã‚‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
            - 3000-4000æ–‡å­—ã®è¨˜äº‹ãŒç”Ÿæˆã•ã‚Œã‚‹
            - 80ç‚¹æœªæº€ãªã‚‰è‡ªå‹•ã§1å›ä¿®æ­£

            **Note.comã¸ã®æŠ•ç¨¿:**

            | æ–¹æ³• | ã‚„ã‚Šæ–¹ |
            |------|--------|
            | æ‰‹å‹•ã‚³ãƒ”ãƒ¼ï¼ˆæ¨å¥¨ï¼‰ | ã‚¿ã‚¤ãƒˆãƒ«ãƒ»æœ¬æ–‡ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦Note.comã«è²¼ã‚Šä»˜ã‘ |
            | è‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ | ã€Œè‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€ãƒœã‚¿ãƒ³ï¼ˆè¦èªè¨¼æƒ…å ±è¨­å®šï¼‰ |
            """)

    # Theme proposal feature
    with st.expander("ğŸ¯ ãƒ†ãƒ¼ãƒææ¡ˆæ©Ÿèƒ½ï¼ˆNEWï¼‰"):
        st.markdown("""
        ### è¨˜äº‹ãƒ†ãƒ¼ãƒã‚’AIã«ææ¡ˆã—ã¦ã‚‚ã‚‰ã†

        è¨˜äº‹ã®ãƒã‚¿åˆ‡ã‚Œã«å›°ã£ãŸã‚‰ã€AIã«ãƒ†ãƒ¼ãƒã‚’ææ¡ˆã—ã¦ã‚‚ã‚‰ãˆã¾ã™ã€‚

        **ä½¿ã„æ–¹:**
        1. ç®¡ç†ãƒ‘ãƒãƒ« â†’ **ã€Œãƒ†ãƒ¼ãƒææ¡ˆã€ã‚¿ãƒ–**
        2. è»¸ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆä¾‹ï¼šã€Œäºˆç®—ç®¡ç†ã€ï¼‰ã¨ãƒšãƒ«ã‚½ãƒŠã‚’å…¥åŠ›
        3. ã€Œãƒ†ãƒ¼ãƒã‚’ææ¡ˆã€ã‚’ã‚¯ãƒªãƒƒã‚¯
        4. 5-10å€‹ã®ãƒ†ãƒ¼ãƒå€™è£œãŒç”Ÿæˆã•ã‚Œã‚‹
        5. æ°—ã«å…¥ã£ãŸãƒ†ãƒ¼ãƒã‚’ã€Œè¨˜äº‹ã¨ã—ã¦ç™»éŒ²ã€

        **ãƒ†ãƒ¼ãƒç”Ÿæˆã®ä»•çµ„ã¿:**

        | æƒ…å ±æº | å†…å®¹ |
        |--------|------|
        | SEOãƒˆãƒ¬ãƒ³ãƒ‰ï¼ˆTavilyï¼‰ | æ¤œç´¢ä¸Šä½è¨˜äº‹ã‚’åˆ†æã€éœ€è¦ã®ã‚ã‚‹ãƒ†ãƒ¼ãƒã‚’æŠ½å‡º |
        | ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ï¼ˆRAGï¼‰ | åè‘—ã‚„ç¤¾å†…çŸ¥è¦‹ã‹ã‚‰ç‹¬è‡ªã®åˆ‡ã‚Šå£ã‚’ç™ºè¦‹ |
        | GPT-4o | ä¸¡æ–¹ã‚’èåˆã—ã¦ã‚ªãƒªã‚¸ãƒŠãƒ«ã®ãƒ†ãƒ¼ãƒã‚’ç”Ÿæˆ |

        **ãƒã‚¤ãƒ³ãƒˆ:**
        - ç«¶åˆã¨å·®åˆ¥åŒ–ã§ãã‚‹ãƒ†ãƒ¼ãƒãŒææ¡ˆã•ã‚Œã‚‹
        - ä¸€æ‹¬é¸æŠã—ã¦è¤‡æ•°è¨˜äº‹ã‚’ç™»éŒ²å¯èƒ½
        """)

    # Knowledge base feature
    with st.expander("ğŸ“š ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹æ´»ç”¨"):
        st.markdown("""
        ### ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã¨ã¯ï¼Ÿ

        è¨˜äº‹ä½œæˆæ™‚ã«AIãŒå‚ç…§ã™ã‚‹**ç¤¾å†…çŸ¥è¦‹ãƒ»åè‘—ã®è¦ç´„**ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§ã™ã€‚

        **ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã®å†…å®¹ã¯è¨˜äº‹ã«åæ˜ ã•ã‚Œã¾ã™:**

        ```
        91_RefDoc/ ã«ãƒ•ã‚¡ã‚¤ãƒ«è¿½åŠ 
              â†“
        ç®¡ç†ãƒ‘ãƒãƒ« â†’ ã€ŒçŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã‚’æ›´æ–°ã€
              â†“
        è¨˜äº‹ç”Ÿæˆæ™‚ã«WriterAgentãŒè‡ªå‹•å‚ç…§
              â†“
        åè‘—ã®è€ƒãˆæ–¹ãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒè¨˜äº‹ã«åæ˜ 
        ```

        **è¿½åŠ ã§ãã‚‹ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼:**
        - PDFï¼ˆåè‘—ã®è¦ç´„ã€ãƒ¬ãƒãƒ¼ãƒˆï¼‰
        - Markdown / ãƒ†ã‚­ã‚¹ãƒˆï¼ˆDEEPãƒªã‚µãƒ¼ãƒçµæœã€ãƒ¡ãƒ¢ï¼‰
        - JSONï¼ˆæ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼‰

        **åŠ¹æœãŒé«˜ã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„:**

        | ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ | ä¾‹ | åŠ¹æœ |
        |-----------|-----|------|
        | åè‘—ã®è¦ç´„ | ã€äºˆç®—ç®¡ç†ã®æ–°å¸¸è­˜ã€è¦ç´„ | ç†è«–çš„ãªè£ä»˜ã‘ |
        | DEEPãƒªã‚µãƒ¼ãƒ | æ¥­ç•Œãƒ¬ãƒãƒ¼ãƒˆã€çµ±è¨ˆãƒ‡ãƒ¼ã‚¿ | æ•°å­—ã®æ ¹æ‹  |
        | ç¤¾å†…ãƒã‚¦ãƒã‚¦ | ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹é›† | ç‹¬è‡ªæ€§ |
        | äº‹ä¾‹é›† | æˆåŠŸ/å¤±æ•—äº‹ä¾‹ | å…·ä½“æ€§ |

        **æ›´æ–°æ–¹æ³•:**
        1. `91_RefDoc/` ãƒ•ã‚©ãƒ«ãƒ€ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ 
        2. ç®¡ç†ãƒ‘ãƒãƒ« â†’ çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ â†’ ã€ŒçŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã‚’æ›´æ–°ã€
        """)

    # Quality improvement tips
    with st.expander("ğŸ’¡ è¨˜äº‹ã®è³ªã‚’ä¸Šã’ã‚‹ã‚³ãƒ„"):
        st.markdown("""
        ### å…¥åŠ›ã®è³ª = è¨˜äº‹ã®è³ª

        **åŠ¹æœãŒé«˜ã„é †:**

        1. **ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã‚’å……å®Ÿã•ã›ã‚‹**ï¼ˆæœ€é‡è¦ï¼‰
           - åè‘—ã®è¦ç´„ã€DEEPãƒªã‚µãƒ¼ãƒçµæœã‚’è¿½åŠ 
           - è¨˜äº‹ç”Ÿæˆæ™‚ã«è‡ªå‹•ã§å‚ç…§ã•ã‚Œã‚‹
           - ç®¡ç†ãƒ‘ãƒãƒ« â†’ çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ â†’ ã€ŒçŸ¥è­˜ãƒ™ãƒ¼ã‚¹ã‚’æ›´æ–°ã€

        2. **ã‚¨ãƒƒã‚»ãƒ³ã‚¹ã‚’å……å®Ÿã•ã›ã‚‹**
           - ã€Œèª°ã‚‚çŸ¥ã‚‰ãªã„è©±ã€ã‚’å…¥ã‚Œã‚‹
           - å¤±æ•—è«‡ã¯å…·ä½“çš„ã«ï¼ˆæ—¥ä»˜ãƒ»äººæ•°ãƒ»é‡‘é¡ï¼‰

        3. **ãƒšãƒ«ã‚½ãƒŠã‚’è©³ç´°ã«è¨­å®š**
           - å½¹è·ãƒ»å¹´é½¢ãƒ»æ‚©ã¿ã‚’å…·ä½“çš„ã«
           - ã€Œ40ä»£çµŒå–¶ä¼ç”»éƒ¨é•·ã€Excelè·äººã€DXã«ä¸å®‰ã€

        4. **SEOã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’å…·ä½“çš„ã«**
           - ã€Œäºˆç®—ã€â†’ã€Œäºˆç®—ç®¡ç† Excel è„±å´ã€
           - ãƒ­ãƒ³ã‚°ãƒ†ãƒ¼ãƒ«ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ç‹™ã†
        """)

    # Troubleshooting
    with st.expander("ğŸ”§ ã‚ˆãã‚ã‚‹ãƒˆãƒ©ãƒ–ãƒ«"):
        st.markdown("""
        | ç—‡çŠ¶ | åŸå›  | è§£æ±ºç­– |
        |------|------|--------|
        | ãƒªã‚µãƒ¼ãƒãŒé…ã„ | Tavily APIåˆ¶é™ | æ•°åˆ†å¾…ã£ã¦å†è©¦è¡Œ |
        | è¨˜äº‹ãŒçŸ­ã„ | ã‚¨ãƒƒã‚»ãƒ³ã‚¹ä¸è¶³ | ã‚¨ãƒƒã‚»ãƒ³ã‚¹ã‚’è¿½åŠ ã—ã¦å†ç”Ÿæˆ |
        | ã‚¹ã‚³ã‚¢ãŒä½ã„ | æ§‹é€ è¦ç´ ä¸è¶³ | ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ç¢ºèªã—ã¦ä¿®æ­£ |
        | è‡ªå‹•æŠ•ç¨¿å¤±æ•— | èªè¨¼æƒ…å ±ã‚¨ãƒ©ãƒ¼ | .envã®NOTE_EMAIL/PASSWORDç¢ºèª |
        | DBæ¥ç¶šã‚¨ãƒ©ãƒ¼ | Dockeråœæ­¢ | `docker-compose up -d` |
        """)

    # Keyboard shortcuts
    with st.expander("âŒ¨ï¸ ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆãƒ»Tips"):
        st.markdown("""
        **Streamlit Tips:**
        - `Ctrl + Enter`: ãƒ•ã‚©ãƒ¼ãƒ é€ä¿¡
        - `R`: ãƒšãƒ¼ã‚¸å†èª­ã¿è¾¼ã¿

        **ã‚¨ãƒ‡ã‚£ã‚¿ Tips:**
        - `Ctrl + A`: å…¨é¸æŠï¼ˆã‚³ãƒ”ãƒ¼æ™‚ã«ä¾¿åˆ©ï¼‰
        - ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ç·¨é›†ã‚’åˆ‡ã‚Šæ›¿ãˆã¦ç¢ºèª
        """)

    # Version info
    st.divider()
    st.caption("EPM Note Engine v1.1 | ãƒ†ãƒ¼ãƒææ¡ˆãƒ»RAGå¼·åŒ– | Â© 2024 ValueCruise")


def render_help_button() -> None:
    """Render a help button that opens the help page."""
    if st.button("â“ ãƒ˜ãƒ«ãƒ—", use_container_width=True):
        st.session_state.show_help = True
        st.rerun()
